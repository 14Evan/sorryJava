<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>为所欲为</title>

    <meta name="author" content="lizhihao!">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h1>
				动图制作Java版
			</h1>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<p>
			<div class="alert alert-danger" role="alert">根据提示填写内容，点击生成即可获得动图，服务器配置低，所以处理比较慢，请耐心等待。</div>
			</p>
		</div
	<div class="row">
		<p></p>
		<div class="col-md-12">
			<div class="tabbable" id="tabs1">
				<ul class="nav nav-tabs">
					<li class="active">
						<a href="#panel-223024" data-toggle="tab" id="sorry">为所欲为</a>
					</li>
					<li>
						<a href="#panel-445389" data-toggle="tab" id="wangjingze">王境泽</a>
					</li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="panel-223024">
						<div class="row">
							<div class="col-md-6">
								<img class="center-block img-responsive" alt="为所欲为" src="sorry/sorry.webp">
							</div>
							<div class="col-md-6 pre-scrollable">
								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											1
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="好啊">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											2
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="别说我是一等良民">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											3
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="就算你们真的想要诬告我">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											4
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="我有的是钱找律师帮我打官司">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											5
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="我想我根本不用坐牢">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											6
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="你别以为有钱了不起啊">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											7
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="sorry 有钱是真的能为所欲为的">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											8
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="不过我相信你不会明白这种感觉">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											9
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="不明白 不明白">
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
					<div class="tab-pane" id="panel-445389">
						<div class="row">
							<div class="col-md-6">
								<img class="center-block img-responsive" alt="王境泽" src="wangjingze/wangjingze.webp">
							</div>
							<div class="col-md-6">
								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											1
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="我就是饿死">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											2
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="死外边 从这跳下去">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											3
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="也不会吃你们 一点东西">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											4
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="真香">
										</div><br><br><br><br>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<br><br>
		<div class="col-md-12 text-center">
			<label class="radio-inline">
				<input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="simple" alt="小文件，质量低"> 精简模式(文件较小质量差)
			</label>
			<label class="radio-inline">
				<input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="normal" checked alt="大文件，质量高"> 正常模式（文件较大清晰）
			</label>
		</div>
		<br><br>
	</div>
	<div class="row">
		<div class="col-md-12">
			<input type="hidden" id="template" value="sorry">
			<button id="render" type="button" class="btn btn-primary btn-lg center-block" data-loading-text="生成中..." >
				<!--data-target="#myModal"-->
				生成
			</button>
		</div>
	</div>
	<div class="row">
		<br><br>
		<div class="col-md-12">
			<p>
				<img id="result" class="center-block img-responsive" src="">
				<button id="downloadbtn" type="button" class="btn btn-default center-block hidden" aria-label="Left Align">
					<a id="download" href="#" target="_blank">猛击下载<span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span></a>
				</button>
			</p>
		</div>
	</div>
	<!--<div class="row">-->
		<!--<div class="col-md-12">-->
			<!--<p>-->
				<!--<div class="alert alert-success" role="alert">微信中，直接长按可以发送给朋友</div>-->
			<!--</p>-->
		<!--</div>-->
	<!--</div>-->
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/scripts.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
</body>
<script>
	$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
//		e.target // newly activated tab
//		e.relatedTarget // previous active tab
		$('#template').val(e.target.id)
	})
	$('#render').bind('click', function () {
		var $btn = $(this).button('loading')
		$('#render').prop('disabled', true);
		var template = $('#template').val()
		var inputs = $("input[name='" + template + "_sen']")
		var all = [];
		inputs.each(function (i, e) {
			e.value = e.value === '' ? e.placeholder : e.value
			all.push(e.value)
		})
		var json = {
			"templateName": template,
			"sentence": all.join(),
			"mode":$("input:checked").val()
		}

		$.ajax({
			type: "POST",
			url: "/gif/filePath",
			data: JSON.stringify(json),
			contentType: "application/json",
			dataType: 'json'
		}).done(function (msg) {
			if (msg.code=='0'){
				alert("生成成功！: " + msg.result);
				$('#download').attr('href', msg.result);
			} else {
				alert("服务器爆掉了，请稍后再试！赞赏给作者点鼓励吧。");
				$('#result').attr('src', 'http://p5m79jjxo.bkt.clouddn.com/money.jpg');
			}
		}).error(function (jqxhr, textStatus, errorThrown) {
			alert("服务器爆掉了，请稍后再试！赞赏给作者点鼓励吧。");
			$('#result').attr('src', 'http://p5m79jjxo.bkt.clouddn.com/money.jpg');
		}).complete(function () {
			$btn.button('reset')
			$('#render').prop('disabled', false);
			$('#downloadbtn').removeClass('hidden')
		});
	});
//	$('#result').load(function() {
//		$('#render').button('reset')
//		$('#render').prop('disabled', false);
//	});
</script>
</html>