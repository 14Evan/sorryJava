<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>txtxtx</title>

    <meta name="author" content="lizhihao!">

    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">

</head>
<body>
<div class="container">
	<div class="row">
		<div class="col-md-12">
			<h1>
				动图制作
			</h1>
		</div>
	</div>
	<div class="row">
		<p></p>
		<div class="col-md-12">
			<div class="tabbable" id="tabs1">
				<ul class="nav nav-tabs">
					<li class="active">
						<a href="#panel-223024" data-toggle="tab" id="sorry">为所欲为</a>
					</li>
					<li>
						<a href="#panel-445389" data-toggle="tab" id="wangjingze">王境泽</a>
					</li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="panel-223024">
						<div class="row">
							<div class="col-md-6">
								<img class="center-block img-responsive" alt="为所欲为" src="sorry/sorry.webp">
							</div>
							<div class="col-md-6 pre-scrollable">
								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											1
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="好啊">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											2
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="就算你是一流工程师">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											3
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="就算你出报告再完美">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											4
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="我叫你改报告你就要改">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											5
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="毕竟我是客户">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											6
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="客户了不起啊">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											7
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="sorry 客户真的了不起">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											8
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="以后叫他天天改报告">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											9
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="sorry_sen" placeholder="天天改 天天改">
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
					<div class="tab-pane" id="panel-445389">
						<div class="row">
							<div class="col-md-6">
								<img class="center-block img-responsive" alt="王境泽" src="wangjingze/wangjingze.webp">
							</div>
							<div class="col-md-6">
								<form class="form-horizontal" role="form">
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											1
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="我就是饿死">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											2
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="死外边 从这跳下去">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											3
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="也不会吃你们 一点东西">
										</div>
									</div>
									<div class="form-group">
										<label  class="col-sm-2 control-label">
											4
										</label>
										<div class="col-sm-10">
											<input type="text" class="form-control" name="wangjingze_sen" placeholder="真香">
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<p></p>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<input type="hidden" id="template" value="sorry">
			<button id="render" type="button" class="btn btn-primary btn-lg center-block" data-toggle="modal" >
				<!--data-target="#myModal"-->
				生成
			</button>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<p>
				<img id="result" class="center-block img-responsive" src="">
			</p>
		</div>
	</div>
	<div class="row">
		<div class="col-md-12">
			<p>
				<div class="alert alert-danger" role="alert">本站只是1MB小水管，速度慢请见谅</div>
			</p>
		</div>
	</div>
</div>
<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
				<h4 class="modal-title" id="myModalLabel">生成中</h4>
			</div>
			<div class="modal-body">
				生成ing
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			</div>
		</div>
	</div>
</div>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/scripts.js"></script>
</body>
<script>
	$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
//		e.target // newly activated tab
//		e.relatedTarget // previous active tab
		$('#template').val(e.target.id)
	})
	$('#render').bind('click', function () {
		var template = $('#template').val()
		var inputs = $("input[name='" + template + "_sen']")
		var all = [];
		inputs.each(function (i, e) {
			e.value = e.value === '' ? e.placeholder : e.value
			all.push(e.value)
		})
		var json = {
			"templateName": template,
			"sentence": all.join()

		}

		$.ajax({
			type: "POST",
			url: "/gif/filePath",
			data: JSON.stringify(json),
			contentType: "application/json",
			dataType: 'json',
			beforeSend: function ( xhr ) {
				$('#render').attr('disable','true');
			}
		}).done(function (msg) {
			if (msg.code=='0'){
				alert("生成成功！: " + msg.result);
				$('#result').attr('src', msg.result);
			} else {
				alert("人太多了: " + msg.result);
				$('#result').attr('src', 'http://csdnimg.cn/pubfooter/images/csdn_cs_qr.png');
			}
		}).error(function (jqxhr, textStatus, errorThrown) {
			alert("人太多了" + errorThrown);
		}).complete(function () {
			$('#render').attr('disable','false');
		});
//		var jqxhr = $.post("/gif/filePath",
//				{
//					data: JSON.stringify(json),
//				},
//				function () {
//					alert("success");
//				})
//				.success(function () {
//					alert("second success");
//				})
//				.error(function (jqxhr, textStatus, errorThrown) {
//					alert("人太多了" + errorThrown);
//				})
				;
	});
</script>
</html>